## SofaROS

For this task we need SOFA with SofaPython3 plugin. I have tested it with the binaries from [ROS2 Foxy](https://docs.ros.org/en/foxy/Installation.html) and **SOFA v22.06** in Ubuntu 20.04. The binaries from Foxy are built using *Python3.8*, so make sure that the executable used to compile SOFA is the same version. If you are in Ubuntu use the following line for the installation (from the original SOFA documentation).

```
sudo apt install python3.8-dev
sudo apt-get install python3-distutils \
&& curl -L https://bootstrap.pypa.io/pip/get-pip.py --output /tmp/get-pip3.py \
&& python3.8 /tmp/get-pip3.py \
&& python3.8 -m pip install --upgrade pip \
&& python3.8 -m pip install numpy scipy
```

on Windows just install the newest version of Python3.8 from their official webpage. On the CMake GUI just make sure to set the variable **PYTHON_EXECUTABLE** to the path of Python3.8. In the CMake console, you will have printed the used Python version for the compilation, make sure it is 3.8. Compile SOFA as usual and don't forget to add *SofaPython3* into the plugin_list file generated by SOFA.


To use this script make sure you source the setup file for the specific ROS version you want and to use Python 3.8 as your executable. This two classes can be used similar to other *Sofa.Core.Controller*. The original **sofaros.py** file can be found in the [*SofaSoftRobotsPlugin*](https://github.com/SofaDefrost/SoftRobots/tree/master/docs/sofapython3/examples/sofaros).

```
source /opt/ros/ros_distro/setup.bash
```